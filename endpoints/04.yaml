name: Cart
description: 'APIs for shopping cart management'
endpoints:
  -
    custom: []
    httpMethods:
      - GET
    uri: api/v1/cart
    metadata:
      custom: []
      groupName: Cart
      groupDescription: 'APIs for shopping cart management'
      subgroup: ''
      subgroupDescription: ''
      title: 'Get cart'
      description: 'Retrieves the current shopping cart with all items, totals, and applied promotions.'
      authenticated: false
      deprecated: false
    headers:
      X-Cart-Token: abc123token
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |
          {
              "data": {
                  "token": "01K8WP4SYH6QRS0T82D3XAHD25",
                  "version": 2,
                  "context": {
                      "currency": "USD",
                      "locale": "ru"
                  },
                  "items": [
                      {
                          "id": "SKU-7283-UPJB",
                          "variant_id": 5,
                          "sku": "SKU-7283-UPJB",
                          "qty": 2,
                          "title": "MacBook Air 13",
                          "image": {
                              "id": null,
                              "url": "https://example.com/images/thumb_250_250.webp"
                          },
                          "price": {
                              "currency": "USD",
                              "list_minor": 65325,
                              "sale_minor": 39195,
                              "effective_minor": 39195
                          },
                          "line_total_minor": 78390
                      }
                  ],
                  "promotions": [
                      {
                          "promotion_id": 5,
                          "name": "Debitis quas exercitationem",
                          "type": 2,
                          "value": 4674,
                          "source": 1
                      }
                  ],
                  "warnings": [],
                  "totals": {
                      "items_minor": 78390,
                      "discounts_minor": 4674,
                      "grand_total_minor": 73716
                  }
              }
          }
        headers: []
        description: Success
      -
        custom: []
        status: 404
        content: ''
        headers: []
        description: 'Error: not found'
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - GET
    uri: api/v1/cart/v
    metadata:
      custom: []
      groupName: Cart
      groupDescription: 'APIs for shopping cart management'
      subgroup: ''
      subgroupDescription: ''
      title: 'Get cart version'
      description: |-
        Returns the current version of the cart **without full cart data**.

         This endpoint uses the **HEAD** method and returns data only in headers:
         - `X-Cart-Token` — the current cart token
         - `X-Cart-Version` — the current cart version number

         You can use this to check whether the cart has been updated since the last fetch.
      authenticated: false
      deprecated: false
    headers:
      X-Cart-Token: abc123token
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 204
        content: '{}'
        headers: []
        description: ''
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - POST
    uri: api/v1/cart/items
    metadata:
      custom: []
      groupName: Cart
      groupDescription: 'APIs for managing cart items'
      subgroup: ''
      subgroupDescription: ''
      title: 'Add item to cart'
      description: |-
        Adds a product variant (by sku or id) to the shopping cart with the specified quantity.

        If no `X-Cart-Token` header is provided, the API will **automatically create a new cart**
        before adding the product to it.

        If `X-Cart-Token` **is provided**, the operation will be performed on the existing cart.
        In this case, you **must also send** the `If-Match` header containing the current cart version
        (obtained via the [Get cart version](#cart-GETapi-v1-cart-v) endpoint).

        This mechanism prevents concurrent modifications of the same cart.
      authenticated: false
      deprecated: false
    headers:
      X-Cart-Token: abc123token
      If-Match: '5'
      Idempotency-Key: unique-key-123
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      variant_id:
        custom: []
        name: variant_id
        description: 'Optional The product variant ID to add.'
        required: false
        example: 42
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      sku:
        custom: []
        name: sku
        description: 'optional The product variant SKU to add.'
        required: false
        example: SKU-9660-NCQB
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      qty:
        custom: []
        name: qty
        description: 'Quantity to add.'
        required: true
        example: 2
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      variant_id: 42
      sku: SKU-9660-NCQB
      qty: 2
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |
          {
              "data": {
                  "token": "01K8WP4SYH6QRS0T82D3XAHD25",
                  "version": 3,
                  "context": {
                      "currency": "USD",
                      "locale": "ru"
                  },
                  "items": [
                      {
                          "id": "SKU-9660-NCQB",
                          "variant_id": 42,
                          "sku": "SKU-9660-NCQB",
                          "qty": 2,
                          "title": "MacBook Air 13",
                          "image": {
                              "id": 234,
                              "url": "https://example.com/images/thumb_250_250.webp"
                          },
                          "price": {
                              "currency": "USD",
                              "list_minor": 7140,
                              "sale_minor": null,
                              "effective_minor": 7140
                          },
                          "line_total_minor": 14280
                      },
                      {
                          "id": "SKU-7283-UPJB",
                          "variant_id": 5,
                          "sku": "SKU-7283-UPJB",
                          "qty": 2,
                          "title": "MacBook Air 15",
                          "image": "https://example.com/images/thumb_250_250.webp",
                          "price": {
                              "currency": "USD",
                              "list_minor": 65325,
                              "sale_minor": 39195,
                              "effective_minor": 39195
                          },
                          "line_total_minor": 78390
                      }
                  ],
                  "promotions": [
                      {
                          "promotion_id": 5,
                          "name": "Debitis quas exercitationem",
                          "type": 2,
                          "value": 4674,
                          "source": 1
                      }
                  ],
                  "warnings": [],
                  "totals": {
                      "items_minor": 92670,
                      "discounts_minor": 4674,
                      "grand_total_minor": 87996
                  }
              }
          }
        headers: []
        description: Success
      -
        custom: []
        status: 404
        content: ''
        headers: []
        description: 'Error: not found'
      -
        custom: []
        status: 409
        content: ''
        headers: []
        description: 'Error: version mismatch'
      -
        custom: []
        status: 422
        content: ''
        headers: []
        description: 'Error: validation'
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - PATCH
    uri: 'api/v1/cart/items/{itemId}'
    metadata:
      custom: []
      groupName: Cart
      groupDescription: 'APIs for managing cart items'
      subgroup: ''
      subgroupDescription: ''
      title: 'Update cart item quantity'
      description: |-
        Updates the quantity of an existing item in the shopping cart.

        Required headers:
        - `X-Cart-Token` — the token of the existing cart (required).
        - `If-Match` — the current cart version (required; obtained from the [Get cart version](#cart-GETapi-v1-cart-v) endpoint).
        - `Idempotency-Key` — a unique key to ensure idempotency (recommended for safe retries).

        Concurrency & Idempotency:
        - The update operation is protected by the `If-Match` version header. If the version does not match, a conflict error is returned.
        - Repeating the same request with the same `Idempotency-Key` will not cause duplicate operations.

        Response:
        - The response body **always** returns a full snapshot of the updated cart (items, totals, currency, version, etc.).
        - Response headers include:
          - `X-Cart-Token` — the current cart token
          - `X-Cart-Version` — the updated version number
      authenticated: false
      deprecated: false
    headers:
      X-Cart-Token: abc123token
      If-Match: '5'
      Idempotency-Key: unique-key-123
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      itemId:
        custom: []
        name: itemId
        description: 'The ID of the cart item to update.'
        required: true
        example: SKU-9660-NCQB
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanUrlParameters:
      itemId: SKU-9660-NCQB
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      qty:
        custom: []
        name: qty
        description: 'The new quantity for this item.'
        required: true
        example: 3
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      qty: 3
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |
          {
              "data": {
                  "token": "01K8WP4SYH6QRS0T82D3XAHD25",
                  "version": 8,
                  "context": {
                      "currency": "USD",
                      "locale": "ru"
                  },
                  "items": [
                      {
                          "id": "SKU-7283-UPJB",
                          "variant_id": 5,
                          "sku": "SKU-7283-UPJB",
                          "qty": 2,
                          "title": "MacBook Air 13",
                          "image": {
                              "id": 234,
                              "url": "https://example.com/images/thumb_250_250.webp"
                          },
                          "price": {
                              "currency": "USD",
                              "list_minor": 65325,
                              "sale_minor": 39195,
                              "effective_minor": 39195
                          },
                          "line_total_minor": 78390
                      },
                      {
                          "id": "SKU-9660-NCQB",
                          "variant_id": 42,
                          "sku": "SKU-9660-NCQB",
                          "qty": 5,
                          "price": {
                              "currency": "USD",
                              "list_minor": 7140,
                              "sale_minor": null,
                              "effective_minor": 7140
                          },
                          "line_total_minor": 35700
                      }
                  ],
                  "promotions": [
                      {
                          "promotion_id": 5,
                          "name": "Debitis quas exercitationem",
                          "type": 2,
                          "value": 4674,
                          "source": 1
                      }
                  ],
                  "warnings": [],
                  "totals": {
                      "items_minor": 114090,
                      "discounts_minor": 4674,
                      "grand_total_minor": 109416
                  }
              }
          }
        headers: []
        description: Success
      -
        custom: []
        status: 404
        content: ''
        headers: []
        description: 'Error: not found'
      -
        custom: []
        status: 409
        content: ''
        headers: []
        description: 'Error: version mismatch'
      -
        custom: []
        status: 422
        content: ''
        headers: []
        description: 'Error: validation'
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - PATCH
    uri: 'api/v1/cart/items/{itemId}/options'
    metadata:
      custom: []
      groupName: Cart
      groupDescription: 'APIs for managing cart items'
      subgroup: ''
      subgroupDescription: ''
      title: 'Set options for a cart item'
      description: ''
      authenticated: false
      deprecated: false
    headers:
      X-Cart-Token: abc123token
      If-Match: '5'
      Idempotency-Key: unique-key-123
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      itemId:
        custom: []
        name: itemId
        description: 'The ID of the cart item to update options for.'
        required: true
        example: architecto
        type: string
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        deprecated: false
    cleanUrlParameters:
      itemId: architecto
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      add:
        custom: []
        name: add
        description: 'Options to add'
        required: false
        example:
          - []
        type: 'object[]'
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        deprecated: false
      'add[].option_id':
        custom: []
        name: 'add[].option_id'
        description: ''
        required: false
        example: 2
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      'add[].qty':
        custom: []
        name: 'add[].qty'
        description: ''
        required: false
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      remove:
        custom: []
        name: remove
        description: 'Option ids to remove'
        required: false
        example:
          - 2
          - 3
        type: 'integer[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      add:
        -
          option_id: 2
          qty: 1
      remove:
        - 2
        - 3
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |
          {
              "data": {
                  "token": "01K9VNSS9SYAJVH9NTHZ8DC416",
                  "version": 4,
                  "context": {
                      "currency": "USD",
                      "locale": "ru"
                  },
                  "items": [
                      {
                          "id": "SKU-3277-CZVN",
                          "variant_id": 737,
                          "sku": "SKU-3277-CZVN",
                          "qty": 2,
                          "title": "MacBook Air 13",
                          "image": {
                              "id": 234,
                              "url": "https://example.com/images/thumb_250_250.webp"
                          },
                          "price": {
                              "currency": "USD",
                              "list_minor": 1077,
                              "sale_minor": 937,
                              "effective_minor": 937
                          },
                          "options": [
                              {
                                  "option": {
                                      "id": 2,
                                      "code": "gift_wrap",
                                      "title": "Подарочная упаковка",
                                      "kind": 2
                                  },
                                  "qty": 1,
                                  "pricing": {
                                      "pricing_mode": 4,
                                      "percent": null,
                                      "amount": 300,
                                      "amount_currency": "USD",
                                      "unit_price_minor": 300,
                                      "total_price_minor": 300
                                  },
                                  "tax_total_minor": 0
                              }
                          ],
                          "options_total_minor": 300,
                          "line_total_minor": 2174
                      }
                  ],
                  "promotions": [
                      {
                          "promotion_id": 1,
                          "name": "Aut et id",
                          "type": 2,
                          "value": 1131,
                          "source": 1
                      }
                  ],
                  "warnings": [],
                  "totals": {
                      "items_minor": 2174,
                      "discounts_minor": 1376,
                      "grand_total_minor": 798
                  }
              }
          }
        headers: []
        description: Success
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - DELETE
    uri: 'api/v1/cart/items/{itemId}'
    metadata:
      custom: []
      groupName: Cart
      groupDescription: 'APIs for managing cart items'
      subgroup: ''
      subgroupDescription: ''
      title: 'Remove item from cart'
      description: |-
        Removes a specific item from the shopping cart.

        Required headers:
        - `X-Cart-Token` — the token of the existing cart (required).
        - `If-Match` — the current cart version (required; obtained from the [Get cart version](#cart-GETapi-v1-cart-v) endpoint).
        - `Idempotency-Key` — a unique key to ensure idempotency (recommended for safe retries).

        Concurrency & Idempotency:
        - The removal operation is protected by the `If-Match` version header. If the version does not match, a conflict error is returned.
        - Repeating the same request with the same `Idempotency-Key` will not cause duplicate operations.

        Response:
        - The response body **always** returns a full snapshot of the cart after removal (items, totals, currency, version, etc.).
        - Response headers include:
          - `X-Cart-Token` — the current cart token
          - `X-Cart-Version` — the updated version number
      authenticated: false
      deprecated: false
    headers:
      X-Cart-Token: abc123token
      If-Match: '5'
      Idempotency-Key: unique-key-123
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      itemId:
        custom: []
        name: itemId
        description: 'The ID of the cart item to remove.'
        required: true
        example: SKU-9660-NCQB
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanUrlParameters:
      itemId: SKU-9660-NCQB
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |
          {
              "data": {
                  "token": "01K8WP4SYH6QRS0T82D3XAHD25",
                  "version": 9,
                  "context": {
                      "currency": "USD",
                      "locale": "ru"
                  },
                  "items": [
                      {
                          "id": "SKU-7283-UPJB",
                          "variant_id": 5,
                          "sku": "SKU-7283-UPJB",
                          "qty": 2,
                          "title": "MacBook Air 13",
                          "image": {
                              "id": 234,
                              "url": "https://example.com/images/thumb_250_250.webp"
                          },
                          "price": {
                              "currency": "USD",
                              "list_minor": 65325,
                              "sale_minor": 39195,
                              "effective_minor": 39195
                          },
                          "line_total_minor": 78390
                      }
                  ],
                  "promotions": [
                      {
                          "promotion_id": 5,
                          "name": "Debitis quas exercitationem",
                          "type": 2,
                          "value": 4674,
                          "source": 1
                      }
                  ],
                  "warnings": [],
                  "totals": {
                      "items_minor": 78390,
                      "discounts_minor": 4674,
                      "grand_total_minor": 73716
                  }
              }
          }
        headers: []
        description: Success
      -
        custom: []
        status: 404
        content: ''
        headers: []
        description: 'Error: not found'
      -
        custom: []
        status: 409
        content: ''
        headers: []
        description: 'Error: version mismatch'
      -
        custom: []
        status: 422
        content: ''
        headers: []
        description: 'Error: validation'
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - POST
    uri: api/v1/cart/coupons
    metadata:
      custom: []
      groupName: Cart
      groupDescription: 'APIs for managing cart coupons and discounts'
      subgroup: ''
      subgroupDescription: ''
      title: 'Apply coupon to cart'
      description: |-
        Applies a discount coupon code to the shopping cart.

        Response:
        - The response body **always** returns a full snapshot of the updated cart (items, totals, currency, version, etc.).
        - Response headers include:
          - `X-Cart-Token` — the current cart token
          - `X-Cart-Version` — the updated version number
      authenticated: false
      deprecated: false
    headers:
      X-Cart-Token: abc123token
      If-Match: '5'
      Idempotency-Key: unique-key-123
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      code:
        custom: []
        name: code
        description: 'The coupon code to apply.'
        required: true
        example: SAVE10
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      code: SAVE10
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |
          {
              "data": {
                  "token": "01K8WP4SYH6QRS0T82D3XAHD25",
                  "version": 10,
                  "context": {
                      "currency": "USD",
                      "locale": "ru"
                  },
                  "items": [
                      {
                          "id": "SKU-7283-UPJB",
                          "variant_id": 5,
                          "sku": "SKU-7283-UPJB",
                          "qty": 2,
                          "title": "MacBook Air 13",
                          "image": {
                              "id": 234,
                              "url": "https://example.com/images/thumb_250_250.webp"
                          },
                          "price": {
                              "currency": "USD",
                              "list_minor": 65325,
                              "sale_minor": 39195,
                              "effective_minor": 39195
                          },
                          "line_total_minor": 78390
                      }
                  ],
                  "promotions": [
                      {
                          "promotion_id": 6,
                          "name": "Reprehenderit et a",
                          "type": 1,
                          "value": 25,
                          "source": 2
                      }
                  ],
                  "warnings": [],
                  "totals": {
                      "items_minor": 78390,
                      "discounts_minor": 19597,
                      "grand_total_minor": 58793
                  }
              }
          }
        headers: []
        description: Success
      -
        custom: []
        status: 404
        content: ''
        headers: []
        description: 'Error: not found'
      -
        custom: []
        status: 409
        content: ''
        headers: []
        description: 'Error: version mismatch'
      -
        custom: []
        status: 422
        content: ''
        headers: []
        description: 'Error: validation'
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - DELETE
    uri: 'api/v1/cart/coupons/{code}'
    metadata:
      custom: []
      groupName: Cart
      groupDescription: 'APIs for managing cart coupons and discounts'
      subgroup: ''
      subgroupDescription: ''
      title: 'Remove coupon from cart'
      description: |-
        Removes a previously applied coupon code from the shopping cart.

        Response:
        - The response body **always** returns a full snapshot of the updated cart (items, totals, currency, version, etc.).
        - Response headers include:
          - `X-Cart-Token` — the current cart token
          - `X-Cart-Version` — the updated version number
      authenticated: false
      deprecated: false
    headers:
      X-Cart-Token: abc123token
      If-Match: '5'
      Idempotency-Key: unique-key-123
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      code:
        custom: []
        name: code
        description: 'The coupon code to remove.'
        required: true
        example: SAVE10
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanUrlParameters:
      code: SAVE10
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |
          {
              "data": {
                  "token": "01K8WP4SYH6QRS0T82D3XAHD25",
                  "version": 11,
                  "context": {
                      "currency": "USD",
                      "locale": "ru"
                  },
                  "items": [
                      {
                          "id": "SKU-7283-UPJB",
                          "variant_id": 5,
                          "sku": "SKU-7283-UPJB",
                          "qty": 2,
                          "title": "MacBook Air 13",
                          "image": {
                              "id": 234,
                              "url": "https://example.com/images/thumb_250_250.webp"
                          },
                          "price": {
                              "currency": "USD",
                              "list_minor": 65325,
                              "sale_minor": 39195,
                              "effective_minor": 39195
                          },
                          "line_total_minor": 78390
                      }
                  ],
                  "promotions": [
                      {
                          "promotion_id": 5,
                          "name": "Debitis quas exercitationem",
                          "type": 2,
                          "value": 4674,
                          "source": 1
                      }
                  ],
                  "warnings": [],
                  "totals": {
                      "items_minor": 78390,
                      "discounts_minor": 4674,
                      "grand_total_minor": 73716
                  }
              }
          }
        headers: []
        description: Success
      -
        custom: []
        status: 404
        content: ''
        headers: []
        description: 'Error: not found'
      -
        custom: []
        status: 409
        content: ''
        headers: []
        description: 'Error: version mismatch'
      -
        custom: []
        status: 422
        content: ''
        headers: []
        description: 'Error: validation'
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
